<div class="content-project">
  <h5 class="title">{{ nameTitle }}</h5>
</div>
<form [formGroup]="productForm" class="form-container mt-3">
  <mat-form-field class="full-width">
    <mat-label>Nombre</mat-label>
    <input matInput formControlName="name" required />
    <mat-error
      *ngIf="
        productForm.get('name')?.invalid &&
        (productForm.get('name')?.dirty || productForm.get('name')?.touched)
      "
    >
      El nombre del producto es requerido
    </mat-error>
  </mat-form-field>

  <mat-form-field class="full-width">
    <mat-label>Precio</mat-label>
    <input
      matInput
      formControlName="price"
      type="number"
      step="0.01"
      required
    />
    <mat-error
      *ngIf="
        productForm.get('price')?.invalid &&
        (productForm.get('price')?.dirty || productForm.get('price')?.touched)
      "
    >
      El precio del producto es requerido
    </mat-error>
  </mat-form-field>

  <mat-form-field class="full-width">
    <mat-label>Descripcion</mat-label>
    <input matInput formControlName="description" required maxlength="70" />
    <mat-error
      *ngIf="
        productForm.get('description')?.invalid &&
        (productForm.get('description')?.dirty ||
          productForm.get('description')?.touched)
      "
    >
      La descripci√≥n del producto es requerida
    </mat-error>
  </mat-form-field>

  <mat-form-field class="full-width">
    <mat-label>Cantidad</mat-label>
    <input matInput formControlName="quantity" type="number" required />
    <mat-error
      *ngIf="
        productForm.get('quantity')?.invalid &&
        (productForm.get('quantity')?.dirty ||
          productForm.get('quantity')?.touched)
      "
    >
      La cantidad del producto es requerida
    </mat-error>
  </mat-form-field>

  <div class="d-flex align-items-center justify-content-between w-100 py-3">
    <input
      type="file"
      (change)="captureFile($event)"
      formControlName="image"
      accept="image/*"
      *ngIf="product.isUpdate === false"
      style="border: 0; color: transparent"
    />

    <img
      [src]="previewImg"
      *ngIf="previewImg && !product.isUpdate; else oldImage"
      alt="Vista previa de la imagen"
      class="preview-image"
    />

    <ng-template #oldImage>
      <img
        *ngIf="product.product && product.product.image"
        [src]="product.product.image"
        alt="Vista previa de la imagen"
        class="preview-image"
      />
    </ng-template>
  </div>

  <div
    class="d-flex align-items-center justify-content-end mt-5 btn-content"
    style="gap: 1rem"
  >
    <button type="submit" class="btn btn-primary" (click)="createProduct()">
      {{ nameButton }}
    </button>
    <button type="button" class="btn btn-secondary" (click)="closeModal()">
      Cerrar
    </button>
  </div>
</form>
